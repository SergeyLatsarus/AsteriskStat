<!DOCTYPE html>
<html>
  <head>
    <style>
   table {
    border-collapse: collapse; /* Отображать только одинарные линии */
   }
        table.t1  { margin-left:20px; }
  table.t2  { margin-left:20px; }
   th {
    text-align: left; /* Выравнивание по левому краю */
    background: #dfedf3; /* Цвет фона ячеек */
    padding: 5px; /* Поля вокруг содержимого ячеек */
    border: 1px solid black; /* Граница вокруг ячеек */
   }
   td {
    padding: 5px; /* Поля вокруг содержимого ячеек */
    border: 1px solid black; /* Граница вокруг ячеек */
   }
    </style>
      <title>Atserisk Stat</title>
      <meta charset="utf-8">
      <title>jQuery UI Datepicker - Default functionality</title>
      <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
      <script src="//code.jquery.com/jquery-1.10.2.js"></script>
      <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
      <link rel="stylesheet" href="/resources/demos/style.css">

      <script>
      $(function() {
        $( "#datepicker_from" ).datepicker();
      });
        $(function() {
        $( "#datepicker_to" ).datepicker();
      });
      </script>

  </head>

  <body>
      {% block content %}
        <form action="" method="post" name="input_date_from">
          {{form.hidden_tag()}}
          <p>
          Please select date from:
          {{ form.input_date_from(size=10, id="datepicker_from")}} to:
          {{ form.input_date_to(size=10, id="datepicker_to")}} <span style="margin-left:95%;"> <a href="/config">Config</a></span>
              <br>
          </p>
        <p><input type="submit" value="Get Report"></p>
        </form>
      {% endblock %}

      <table class="t1" width="98%" align=center height="55%" border="0" cellpadding="0" cellspacing="0">
        <thead align=center>
            <tr style="background: #dfedf3" height=40 align=center>
              <th colspan="2" rowspan="2">Менеджер \ Часы </th>

            {% for i in work_hours %}
              <th colspan="2" rowspan="2" align=center >{{i}}:00</th>
            {% endfor %}

            </tr>
        </thead>
        <tbody align=center border=solid 1px #326e87>

            {% for manager in managers %}

            <tr>
              <td colspan="2" rowspan="2" style="background: #dfedf3">{{ managers[manager].caller_name }} {{ managers[manager].caller_id }}</td>

                {% for i in work_hours %}
                  <td rowspan="2" align=center class="row" id = "{{ managers[manager].caller_id }}aRow{{i}}" > {{managers[manager].details[i].duration}}</td>
                  <script>
                            if ({{ managers[manager].details[i].duration }} == 0) {
                              document.getElementById('{{ managers[manager].caller_id }}aRow{{i}}').style.background = "#ffffff";
                            } else if ({{ managers[manager].details[i].duration }} < 10) {
                              document.getElementById('{{ managers[manager].caller_id }}aRow{{i}}').style.background = "#ff8800";
                            } else if ({{ managers[manager].details[i].duration }} < 15) {
                              document.getElementById('{{ managers[manager].caller_id }}aRow{{i}}').style.background = "#ffc800";
                            } else if ({{ managers[manager].details[i].duration }} < 25) {
                              document.getElementById('{{ managers[manager].caller_id }}aRow{{i}}').style.background = "#c4ff00";
                            } else if ({{ managers[manager].details[i].duration }} < 35) {
                              document.getElementById('{{ managers[manager].caller_id }}aRow{{i}}').style.background = "#00ff00";
                            } else if ({{ managers[manager].details[i].duration }} < 70) {
                              document.getElementById('{{ managers[manager].caller_id }}aRow{{i}}').style.background = "#228B22";
                            } else {
                              document.getElementById('{{ managers[manager].caller_id }}aRow{{i}}').style.background = "#66CC33";
                            }
                  </script>
                  <td style="background: #dfedf3 "> {{ managers[manager].details[i].positive  }} </td>

                {% endfor %}


            </tr>
                 <tr style="background: #dfedf3">

                    {% for i in work_hours %}

                  <td align=center>{{ managers[manager].details[i].negative  }}</td>

                    {% endfor %}

            </tr>

            {% endfor %}

        </tbody>
    </table>

    <br><br>

    <table class="t2" width="50%" align=left height="55%" border="0" cellpadding="0" cellspacing="0">
      <thead rowspan="2">
              <tr style="background: #dfedf3" height=40 align=center>
              <th width="200" align=center >Менеджер</th>
              <th>Входящих звонков</th>
              <th>Исходящих звонков</th>
              <th>Успешных</th>
              <th>Неуспешных</th>
              <th>Всего Минут</th>  
              <th>Средняя продолжительность звонка</th>
              </tr>
      </thead>
      
      <tbody align=center border=solid 1px #326e87>
        {% for manager in managers %}

          <tr>
          <td style="background: #dfedf3">{{ managers[manager].caller_name }} </td>
          <td>{{ managers[manager].inbound_calls }}</td>
          <td>{{ managers[manager].outbound_calls }}</td>
          <td>{{ managers[manager].succesed_calls  }}</td>
          <td>{{ managers[manager].unsuccesed_calls  }}</td>
          <td>{{ managers[manager].total_calls_time  }}</td>
          <td>{{ managers[manager].average_time}}</td>
          </tr>      


        {% endfor %}
      </tbody>  


    </table>  

  </body>
</html>


